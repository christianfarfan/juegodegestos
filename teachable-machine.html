<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Validación de Hábitos - Teachable Machine</title>
    <link rel="stylesheet" href="teachable-machine.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <h1>Validación de Hábitos Saludables</h1>
            <p class="subtitle">Usa gestos para responder las preguntas</p>
        </header>

        <!-- Contadores -->
        <div class="counters-section">
            <div class="counter-card success">
                <div class="counter-label">Aciertos</div>
                <div class="counter-value" id="aciertos">0</div>
            </div>
            <div class="counter-card error">
                <div class="counter-label">Errores</div>
                <div class="counter-value" id="errores">0</div>
            </div>
            <div class="counter-card info">
                <div class="counter-label">Confianza</div>
                <div class="counter-value" id="confianza">0%</div>
            </div>
        </div>

        <!-- Visor principal de imagen -->
        <div class="image-viewer-section">
            <div class="image-container">
                <img id="current-image" src="" alt="Imagen actual" loading="lazy">
                <div class="image-overlay">
                    <div class="question-display" id="question-display">
                        Cargando pregunta...
                    </div>
                </div>
            </div>
        </div>

        <!-- Overlay de cámara y predicción -->
        <div class="camera-overlay" id="camera-overlay">
            <div class="camera-container">
                <video id="webcam" autoplay playsinline></video>
                <div class="prediction-display">
                    <div class="prediction-label" id="prediction-label">Esperando detección...</div>
                    <div class="confidence-bar">
                        <div class="confidence-fill" id="confidence-fill"></div>
                    </div>
                    <div class="confidence-text" id="confidence-text">0%</div>
                </div>
            </div>
        </div>

        <!-- Controles -->
        <div class="controls-section">
            <button id="btn-siguiente" class="btn btn-primary" aria-label="Siguiente imagen">
                Siguiente
            </button>
            <button id="btn-pausar" class="btn btn-secondary" aria-label="Pausar detección">
                Pausar
            </button>
            <button id="btn-reiniciar" class="btn btn-warning" aria-label="Reiniciar ronda">
                Reiniciar
            </button>
        </div>

        <!-- Configuración de umbral -->
        <div class="threshold-section">
            <label for="threshold-slider">Umbral de confianza: <span id="threshold-value">0.6</span></label>
            <input type="range" id="threshold-slider" min="0" max="1" step="0.05" value="0.6" aria-label="Ajustar umbral de confianza">
        </div>

        <!-- Historial de respuestas -->
        <div class="history-section">
            <h2>Historial de Respuestas</h2>
            <div class="history-container" id="history-container">
                <p class="no-history">Aún no hay respuestas registradas</p>
            </div>
        </div>

        <!-- Mensajes de estado -->
        <div class="status-message" id="status-message"></div>
    </div>

    <!-- Scripts -->
    <!-- TensorFlow.js -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.3.1/dist/tf.min.js"></script>
    <!-- Teachable Machine Image -->
    <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>
    <!-- Nuestra aplicación -->
    <script src="teachable-machine.js"></script>
</body>
</html>

